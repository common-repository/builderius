[%- for index, mediaQuery in sortedMediaQueries -%]
    [%- set elementConfig = propertiesConfig[mediaQuery] -%]
    [%- if mediaQuery is same as('all') -%]
        [%- for identifier, cssValues in elementConfig -%]
            [%- set visibilityCondition = builderius_visibility_condition_for_css_identifier(identifier, visibilityConditions) -%]
            [%- if visibilityCondition is not null -%]
                [^- ('[% if builderius_visibility_condition(\"' ~ (visibilityCondition)|escape_quotes|raw ~ '\") == true %]')|raw -^]
            [%- endif -%]
            [^- (identifier ~ ' {')|raw -^]
            [%- for cssValue in cssValues -%]
                [^- cssValue|raw -^]
            [%- endfor -%]
            [^- "}\n" -^]
            [%- if visibilityCondition is not null -%]
                [^- ('[% endif %]')|raw -^]
            [%- endif -%]
        [%- endfor -%]
    [%- else -%]
        [^- ("@media " ~ mediaQuery ~ " {")|raw -^]
        [%- for identifier, cssValues in elementConfig -%]
            [%- set visibilityCondition = builderius_visibility_condition_for_css_identifier(identifier, visibilityConditions) -%]
            [%- if visibilityCondition is not null -%]
                [^- ('[% if builderius_visibility_condition(\"' ~ (visibilityCondition)|escape_quotes|raw ~ '\") == true %]')|raw -^]
            [%- endif -%]
            [^- (identifier ~ ' {')|raw -^]
            [%- for cssValue in cssValues -%]
                [^- cssValue|raw -^]
            [%- endfor -%]
            [^- "}\n" -^]
            [%- if visibilityCondition is not null -%]
                [^- ('[% endif %]')|raw -^]
            [%- endif -%]
        [%- endfor -%]
        [^- "}\n" -^]
    [%- endif -%]
[%- endfor -%]

